<svelte:window on:scroll='handleScroll()' />

<nav ref:nav class='{ isSticky ? "sticky" : "" }'>
    <div class='magic-wand bounce-xy' on:click='changeTheme()'>
        <button class='fas fa-magic fa-lg' href='#' />
        <div class='magic-text'>Color Me</div>
    </div>  
    <div class='menu'>
        <div class='menu__item active' on:click='scrollToPage(".about-page")'>
            About
        </div>
    </div>
</nav>

<style>
    nav {
        background-color: var(--nav-alpha);
        color: var(--color-primary);
        position: fixed;
        top: 0;
        width: 100%;
        height: 3rem;
        display: flex;
        align-items: center;
        justify-content: flex-end;
    }

    nav.sticky {
        background-color: var(--color-alternative);
    }

    .bounce-xy {
        animation: bounce-xy 2s infinite;
    }

    .menu__item:hover {
        border-bottom: 2px solid var(--color-primary);
    }

    .magic-wand {
        cursor: pointer;
        justify-self: flex-start;
        margin-left: 1rem;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .magic-text {
        text-align: center;
        font-size: 0.5rem;
        padding-top: 0.25rem;
    }

    .menu {
        margin-right: 1rem;
        display: flex;
        flex: 1;
        justify-content: flex-end;
    }

    .menu__item {
        padding: 0.25rem 0;
        margin: 0 1rem;
        font-size: 1.25rem;
        font-weight: 400;
        border-bottom: 2px solid transparent;
    }

    .menu__item:hover {
        cursor: pointer;
    }

    @media only screen and (max-width: 375px) {
        nav {
            height: 4rem;
        }
    }

    @keyframes bounce-xy {
        0%, 20%, 50%, 80%, 100% {
            transform: translateY(0) translateX(0);
        }
        40% {
            transform: translateY(2px) translateX(2px);
        }
        60% {
            transform: translateY(1px) translateX(1px);
        }
    }
</style>

<script>
    import { toElement as scrollToElement } from '../_scroll';

    export default {
        data() {
            return {
                isSticky: false
            }
        },

        methods: {
            handleScroll() {
                this.set({ isSticky: window.pageYOffset > this.refs.nav.offsetTop });
            },

            scrollToPage(pageSelector) {
                const nextPage = document.querySelector(pageSelector);
                scrollToElement(nextPage);
            },

            changeTheme() {
                this.store.changeTheme();
            }
        }
    }
</script>